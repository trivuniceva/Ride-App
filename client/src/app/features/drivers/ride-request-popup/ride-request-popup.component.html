<!-- src/app/features/ride/components/ride-request-popup/ride-request-popup.component.html -->
<div class="popup-overlay" *ngIf="visible">
  <div class="popup">
    <!-- Prikaz za tip 'request' (prihvatanje/odbijanje vožnje) -->
    <ng-container *ngIf="popupType === 'request'">
      <h3>📢 Nova vožnja</h3>
      <p>{{ message }}</p>
      <button (click)="onAcceptRequest()">Prihvati</button>
      <button (click)="onRejectRequest()">Odbij</button>
    </ng-container>

    <!-- Prikaz za tip 'action' (započinjanje/otkazivanje vožnje) -->
    <ng-container *ngIf="popupType === 'action'">
      <ng-container *ngIf="!showCancellationReason">
        <h2>Vozač je stigao!</h2>
        <p>{{ message }}</p> <!-- Poruka će biti "Stigli ste na početnu adresu..." -->
        <div class="button-group">
          <button class="btn btn-cancel" (click)="onCancelRidePrompt()">Otkaži vožnju</button>
          <button class="btn btn-start" (click)="onStartRide()">Započni vožnju</button>
        </div>
      </ng-container>

      <ng-container *ngIf="showCancellationReason">
        <h2>Razlog otkazivanja vožnje</h2>
        <p>Molimo navedite detaljan razlog otkazivanja:</p>
        <textarea [(ngModel)]="cancellationReason"
                  placeholder="Unesite razlog (min. 10 karaktera)"
                  [ngClass]="{'is-invalid': isReasonInvalid}"></textarea>
        <div *ngIf="isReasonInvalid" class="error-message">
          Razlog mora imati najmanje 10 karaktera.
        </div>
        <div class="button-group">
          <button class="btn btn-back" (click)="onBackToActions()">Nazad</button>
          <button class="btn btn-confirm-cancel" (click)="onConfirmCancel()">Potvrdi otkazivanje</button>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
