<div class="dialog-container">
  <div class="dialog-header">
    <h2>Detalji Vožnje #{{ ride.id }}</h2>
    <button mat-icon-button (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div *ngIf="shouldShowRatingButton()" class="rating-action">
    <button mat-raised-button color="accent" (click)="openRatingDialog()">
      <mat-icon>rate_review</mat-icon> Ocenite vožnju i vozača
    </button>
  </div>

  <div class="dialog-content">
    <div class="ride-details-left">
      <h3>Informacije o vožnji</h3>
      <p><strong>Ruta:</strong> {{ getRouteDisplay() }}</p>
      <p><strong>Cena:</strong> {{ ride.fullPrice | currency:'RSD':'symbol':'1.2-2' }}</p>
      <p><strong>Datum početka:</strong> {{ ride.createdAt | date:'dd.MM.yyyy. HH:mm' }}</p>
      <p><strong>Status:</strong> {{ ride.rideStatus }}</p>

      <h3>Vozač</h3>
      <div *ngIf="isLoadingDriver">
        <mat-spinner [diameter]="30"></mat-spinner>
      </div>
      <div *ngIf="driver">
        <p><strong>Ime:</strong> {{ driver.firstname }} {{ driver.lastname }}</p>
        <p><strong>Email:</strong> {{ driver.email }}</p>
        <p><strong>Ocena:</strong>
          <ng-container *ngIf="driver.averageRating !== null">
            {{ driver.averageRating | number:'1.1-1' }} <mat-icon>star</mat-icon>
          </ng-container>
          <ng-container *ngIf="driver.averageRating === null">Nema ocena</ng-container>
        </p>
      </div>

      <div class="actions">
        <button mat-raised-button color="primary" (click)="orderNow()">Poruči ponovo</button>
        <button mat-button (click)="orderLater()">Sačuvaj</button>
      </div>
    </div>

    <div class="ride-details-right">
      <div class="map-container-dialog">
        <app-ride-details-map
          [startCoords]="startCoords"
          [destinationCoords]="destinationCoords"
          [waypointsCoords]="waypointsCoords"
          [routePathCoords]="routePathCoords"
        ></app-ride-details-map>
      </div>
    </div>
  </div>
</div>
